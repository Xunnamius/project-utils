/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.cleanTypes = exports.regenerate = exports.eject = void 0;

require("source-map-support/register");

var _fs = require("fs");

var _util = require("util");

var _gulp = _interopRequireDefault(require("gulp"));

var _gulpTap = _interopRequireDefault(require("gulp-tap"));

var _del = _interopRequireDefault(require("del"));

var _fancyLog = _interopRequireDefault(require("fancy-log"));

var _parseGitignore = _interopRequireDefault(require("parse-gitignore"));

var _core = require("@babel/core");

var _path = require("path");

var _inquirer = _interopRequireDefault(require("inquirer"));

var _replaceInFile = _interopRequireDefault(require("replace-in-file"));

var _shelljs = _interopRequireDefault(require("shelljs"));

var _chalk = _interopRequireDefault(require("chalk"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('dotenv').config();

const {
  BUNDLE_ANALYZE
} = process.env;

const sanityCheck = () => {
  if (typeof BUNDLE_ANALYZE !== 'string') throw new TypeError('BUNDLE_ANALYZE is improperly defined. Did you copy dist.env -> .env ?');
};

_shelljs.default.config.silent = true;
_shelljs.default.config.fatal = true;
const paths = {};
paths.flowTyped = 'flow-typed';
paths.flowTypedGitIgnore = `${paths.flowTyped}/.gitignore`;
paths.build = `build`;
paths.buildGitIgnore = `${paths.build}/.gitignore`;
paths.configs = 'config';
paths.packageJson = 'package.json';
paths.launchJson = '.vscode/launch.json';
paths.launchJsonDist = '.vscode/launch.dist.json';
paths.env = '.env';
paths.envDist = 'dist.env';
paths.gitProjectDir = '.git';
paths.gitIgnore = '.gitignore';
paths.packageLockJson = 'package-lock.json';
paths.regenTargets = [`${paths.configs}/*.js`];
const CLI_BANNER = `/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/\n\n`;
const readFileAsync = (0, _util.promisify)(_fs.readFile);

const cleanTypes = async () => {
  sanityCheck();
  const targets = (0, _parseGitignore.default)((await readFileAsync(paths.flowTypedGitIgnore)));
  (0, _fancyLog.default)(`Deletion targets @ ${paths.flowTyped}/: "${targets.join('" "')}"`);
  (0, _del.default)(targets, {
    cwd: paths.flowTyped
  });
};

exports.cleanTypes = cleanTypes;
cleanTypes.description = `Resets the ${paths.flowTyped} directory to a pristine state`;

const regenerate = () => {
  sanityCheck();
  (0, _fancyLog.default)(`Regenerating targets: "${paths.regenTargets.join('" "')}"`);
  process.env.BABEL_ENV = 'generator';
  return _gulp.default.src(paths.regenTargets).pipe((0, _gulpTap.default)(file => file.contents = Buffer.from(CLI_BANNER + (0, _core.transformSync)(file.contents.toString(), {
    sourceFileName: (0, _path.relative)(__dirname, file.path)
  }).code))).pipe(_gulp.default.dest('.'));
};

exports.regenerate = regenerate;
regenerate.description = 'Invokes babel on the files in config, transpiling them into their project root versions';

const eject = () => _inquirer.default.prompt([{
  type: 'input',
  name: 'package.name',
  message: '[package.json] Specify name for this project (must be valid as a directory name)'
}, {
  type: 'input',
  name: 'package.desc',
  message: '[package.json] Very briefly describe this project'
}, {
  type: 'input',
  name: 'package.repo.url',
  message: '[package.json] Specify a git repository URL'
}, {
  type: 'input',
  name: 'debug.address',
  message: '[launch.json] Specify your dev/remote/server ip address (the one running node)',
  default: '192.168.115.5'
}, {
  type: 'input',
  name: 'debug.url',
  message: '[launch.json] Specify the URL entry point for your application',
  default: 'http://dev.local:80'
}, {
  type: 'input',
  name: 'debug.remoteRoot',
  message: "[launch.json] Specify an *absolute* path to this project's root on remote/server"
}, {
  type: 'confirm',
  name: 'installTypes',
  message: 'Do you want to install Flow types for all local packages?',
  default: true
}, {
  type: 'confirm',
  name: 'confirm',
  message: 'Does everything look good?',
  default: false
}]).then(async answers => {
  if (!answers.confirm) return _fancyLog.default.error('Task aborted!');

  try {
    _fancyLog.default.info(`Moving ${paths.envDist} -> ${paths.env}`);

    _shelljs.default.mv(paths.envDist, paths.env);

    _fancyLog.default.info(`Moving ${paths.launchJsonDist} -> ${paths.launchJson}`);

    _shelljs.default.mv(paths.launchJsonDist, paths.launchJson);

    _fancyLog.default.info(`Mutating ${paths.packageJson}`);

    const delta1 = await (0, _replaceInFile.default)({
      files: paths.packageJson,
      from: [/("name": ?)".*?"/g, /("description": ?)".*?"/g, /("url": ?)".*?"/g],
      to: [`$1"${answers.package.name}"`, `$1"${answers.package.desc}"`, `$1"${answers.package.repo.url}"`]
    });

    _fancyLog.default.info(`Mutating ${paths.launchJson}`);

    const delta2 = await (0, _replaceInFile.default)({
      files: paths.launchJson,
      from: [/("address": ?)".*?"/g, /("remoteRoot": ?)".*?"/g, /("url": ?)".*?"/g],
      to: [`$1"${answers.debug.address}"`, `$1"${answers.debug.remoteRoot}"`, `$1"${answers.debug.url}"`]
    });

    _fancyLog.default.info(`Mutating ${paths.gitIgnore}`);

    const delta3 = await (0, _replaceInFile.default)({
      files: paths.gitIgnore,
      from: 'package-lock.json',
      to: ''
    });
    if (!delta1.length) throw new Error(`There was an error attempting to access "${paths.packageJson}"`);
    if (!delta2.length) throw new Error(`There was an error attempting to access "${paths.launchJson}"`);
    if (!delta3.length) throw new Error(`There was an error attempting to access "${paths.gitignore}"`);

    if (answers.installTypes) {
      _fancyLog.default.info(`Installing flow types (please be patient)`);

      _shelljs.default.exec('npm run install-types');
    }

    _fancyLog.default.info(`Removing ${paths.packageLockJson}`);

    _shelljs.default.rm('-f', paths.packageLockJson);

    _fancyLog.default.info('Removing boilerplate git repository');

    _shelljs.default.rm('-rf', '.git');

    _fancyLog.default.info('Initializing new git repository');

    _shelljs.default.exec('git init');

    _fancyLog.default.info(`Renaming project dir to ${answers.package.name}`);

    _shelljs.default.exec(`cd .. && mv '${(0, _path.parse)(__dirname).name}' '${answers.package.name}'`);

    _fancyLog.default.info(_chalk.default.green('Boilerplate ejection completed successfully!'));

    (0, _fancyLog.default)(`Next steps:
\t- If you're going to host this project on Github/Gitlab, begin that process now
\t- Check over ${paths.packageJson} for accuracy; remove any unnecessary dependencies/devDependencies and run scripts
\t- Check over ${paths.launchJson} if you plan on using launch configurations
\t- Look over ${paths.env} and configure it to your liking
\t- Consider removing ${paths.env} from ${paths.gitIgnore} if there're no secret values being passed
\t- Your Gulp file is at ./${paths.configs}/gulpfile.js ${_chalk.default.bold('and not the project root')}. Feel free to customize it!\n`);
  } catch (err) {
    _fancyLog.default.error(_chalk.default.red(`ERROR: ${err.toString()}`));
  }
});

exports.eject = eject;
eject.description = 'Assists in configuring the boilerplate to be something useful';
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9ndWxwZmlsZS5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiQlVORExFX0FOQUxZWkUiLCJwcm9jZXNzIiwiZW52Iiwic2FuaXR5Q2hlY2siLCJUeXBlRXJyb3IiLCJzaCIsInNpbGVudCIsImZhdGFsIiwicGF0aHMiLCJmbG93VHlwZWQiLCJmbG93VHlwZWRHaXRJZ25vcmUiLCJidWlsZCIsImJ1aWxkR2l0SWdub3JlIiwiY29uZmlncyIsInBhY2thZ2VKc29uIiwibGF1bmNoSnNvbiIsImxhdW5jaEpzb25EaXN0IiwiZW52RGlzdCIsImdpdFByb2plY3REaXIiLCJnaXRJZ25vcmUiLCJwYWNrYWdlTG9ja0pzb24iLCJyZWdlblRhcmdldHMiLCJDTElfQkFOTkVSIiwicmVhZEZpbGVBc3luYyIsInJlYWRGaWxlIiwiY2xlYW5UeXBlcyIsInRhcmdldHMiLCJqb2luIiwiY3dkIiwiZGVzY3JpcHRpb24iLCJyZWdlbmVyYXRlIiwiQkFCRUxfRU5WIiwiZ3VscCIsInNyYyIsInBpcGUiLCJmaWxlIiwiY29udGVudHMiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJzb3VyY2VGaWxlTmFtZSIsIl9fZGlybmFtZSIsInBhdGgiLCJjb2RlIiwiZGVzdCIsImVqZWN0IiwidGVybSIsInByb21wdCIsInR5cGUiLCJuYW1lIiwibWVzc2FnZSIsImRlZmF1bHQiLCJ0aGVuIiwiYW5zd2VycyIsImNvbmZpcm0iLCJsb2ciLCJlcnJvciIsImluZm8iLCJtdiIsImRlbHRhMSIsImZpbGVzIiwidG8iLCJwYWNrYWdlIiwiZGVzYyIsInJlcG8iLCJ1cmwiLCJkZWx0YTIiLCJkZWJ1ZyIsImFkZHJlc3MiLCJyZW1vdGVSb290IiwiZGVsdGEzIiwibGVuZ3RoIiwiRXJyb3IiLCJnaXRpZ25vcmUiLCJpbnN0YWxsVHlwZXMiLCJleGVjIiwicm0iLCJjaGFsayIsImdyZWVuIiwiYm9sZCIsImVyciIsInJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7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ZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbi8vID8gVG8gcmVnZW5lcmF0ZSB0aGlzIGZpbGUgKGkuZS4gaWYgeW91IGNoYW5nZWQgaXQgYW5kIHdhbnQgeW91ciBjaGFuZ2VzIHRvXG4vLyA/IGJlIHBlcm1hbmVudCksIGNhbGwgYG5wbSBydW4gcmVnZW5lcmF0ZWAgYWZ0ZXJ3YXJkc1xuXG4vLyAhIEJlIHN1cmUgdGhhdCB0YXNrcyBleHBlY3RlZCB0byBydW4gb24gbnBtIGluc3RhbGwgKG1hcmtlZCBAZGVwZW5kZW50KSBoYXZlXG4vLyAhIGFsbCByZXF1aXJlZCBwYWNrYWdlcyBsaXN0ZWQgdW5kZXIgXCJkZXBlbmRlbmNpZXNcIiBpbnN0ZWFkIG9mXG4vLyAhIFwiZGV2RGVwZW5kZW5jaWVzXCIgaW4gdGhpcyBwcm9qZWN0J3MgcGFja2FnZS5qc29uXG5cbmltcG9ydCB7IHJlYWRGaWxlIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJ1xuaW1wb3J0IGd1bHAgZnJvbSAnZ3VscCdcbmltcG9ydCB0YXAgZnJvbSAnZ3VscC10YXAnXG5pbXBvcnQgZGVsIGZyb20gJ2RlbCdcbmltcG9ydCBsb2cgZnJvbSAnZmFuY3ktbG9nJ1xuaW1wb3J0IHBhcnNlR2l0SWdub3JlIGZyb20gJ3BhcnNlLWdpdGlnbm9yZSdcbmltcG9ydCB7IHRyYW5zZm9ybVN5bmMgYXMgYmFiZWwgfSBmcm9tICdAYmFiZWwvY29yZSdcbmltcG9ydCB7IHBhcnNlIGFzIHBhcnNlUGF0aCwgcmVsYXRpdmUgYXMgcmVsUGF0aCB9IGZyb20gJ3BhdGgnXG5pbXBvcnQgdGVybSBmcm9tICdpbnF1aXJlcidcbmltcG9ydCByZXBsYWNlSW5GaWxlIGZyb20gJ3JlcGxhY2UtaW4tZmlsZSdcbmltcG9ydCBzaCBmcm9tICdzaGVsbGpzJ1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJ1xuXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcblxuY29uc3Qge1xuICAgIEJVTkRMRV9BTkFMWVpFXG59ID0gcHJvY2Vzcy5lbnY7XG5cbi8vID8gQWRkIGFueSBzYW5pdHkgY2hlY2tzL3NlbnRpbmVscyB0byB0aGlzIGZ1bmN0aW9uIGJvZHlcbi8vICEgVGhlIGV4aXN0ZW5jZSBvZiBhbnkgbmV3IGNvbnN0YW50cyBhZGRlZCB0byBkaXN0LmVudiBzaG91bGQgYmUgY2hlY2tlZCBoZXJlXG5jb25zdCBzYW5pdHlDaGVjayA9ICgpID0+IHtcbiAgICBpZih0eXBlb2YgQlVORExFX0FOQUxZWkUgIT09ICdzdHJpbmcnKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCVU5ETEVfQU5BTFlaRSBpcyBpbXByb3Blcmx5IGRlZmluZWQuIERpZCB5b3UgY29weSBkaXN0LmVudiAtPiAuZW52ID8nKTtcbn07XG5cbnNoLmNvbmZpZy5zaWxlbnQgPSB0cnVlO1xuc2guY29uZmlnLmZhdGFsID0gdHJ1ZTtcblxuY29uc3QgcGF0aHMgPSB7fTtcblxucGF0aHMuZmxvd1R5cGVkID0gJ2Zsb3ctdHlwZWQnO1xucGF0aHMuZmxvd1R5cGVkR2l0SWdub3JlID0gYCR7cGF0aHMuZmxvd1R5cGVkfS8uZ2l0aWdub3JlYDtcbnBhdGhzLmJ1aWxkID0gYGJ1aWxkYDtcbnBhdGhzLmJ1aWxkR2l0SWdub3JlID0gYCR7cGF0aHMuYnVpbGR9Ly5naXRpZ25vcmVgO1xucGF0aHMuY29uZmlncyA9ICdjb25maWcnO1xucGF0aHMucGFja2FnZUpzb24gPSAncGFja2FnZS5qc29uJztcbnBhdGhzLmxhdW5jaEpzb24gPSAnLnZzY29kZS9sYXVuY2guanNvbic7XG5wYXRocy5sYXVuY2hKc29uRGlzdCA9ICcudnNjb2RlL2xhdW5jaC5kaXN0Lmpzb24nO1xucGF0aHMuZW52ID0gJy5lbnYnO1xucGF0aHMuZW52RGlzdCA9ICdkaXN0LmVudic7XG5wYXRocy5naXRQcm9qZWN0RGlyID0gJy5naXQnO1xucGF0aHMuZ2l0SWdub3JlID0gJy5naXRpZ25vcmUnO1xucGF0aHMucGFja2FnZUxvY2tKc29uID0gJ3BhY2thZ2UtbG9jay5qc29uJztcblxucGF0aHMucmVnZW5UYXJnZXRzID0gW1xuICAgIGAke3BhdGhzLmNvbmZpZ3N9LyouanNgXG5dO1xuXG5jb25zdCBDTElfQkFOTkVSID0gYC8qKlxuKiAhISEgRE8gTk9UIEVESVQgVEhJUyBGSUxFIERJUkVDVExZICEhIVxuKiAhIFRoaXMgZmlsZSBoYXMgYmVlbiBnZW5lcmF0ZWQgYXV0b21hdGljYWxseS4gU2VlIHRoZSBjb25maWcvKi5qcyB2ZXJzaW9uIG9mXG4qICEgdGhpcyBmaWxlIHRvIG1ha2UgcGVybWFuZW50IG1vZGlmaWNhdGlvbnMhXG4qL1xcblxcbmA7XG5cbmNvbnN0IHJlYWRGaWxlQXN5bmMgPSBwcm9taXNpZnkocmVhZEZpbGUpO1xuXG4vLyAqIENMRUFOVFlQRVNcblxuY29uc3QgY2xlYW5UeXBlcyA9IGFzeW5jICgpID0+IHtcbiAgICBzYW5pdHlDaGVjaygpO1xuXG4gICAgY29uc3QgdGFyZ2V0cyA9IHBhcnNlR2l0SWdub3JlKGF3YWl0IHJlYWRGaWxlQXN5bmMocGF0aHMuZmxvd1R5cGVkR2l0SWdub3JlKSk7XG5cbiAgICBsb2coYERlbGV0aW9uIHRhcmdldHMgQCAke3BhdGhzLmZsb3dUeXBlZH0vOiBcIiR7dGFyZ2V0cy5qb2luKCdcIiBcIicpfVwiYCk7XG4gICAgZGVsKHRhcmdldHMsIHsgY3dkOiBwYXRocy5mbG93VHlwZWQgfSk7XG59O1xuXG5jbGVhblR5cGVzLmRlc2NyaXB0aW9uID0gYFJlc2V0cyB0aGUgJHtwYXRocy5mbG93VHlwZWR9IGRpcmVjdG9yeSB0byBhIHByaXN0aW5lIHN0YXRlYDtcblxuLy8gKiBSRUdFTkVSQVRFXG5cbi8vID8gSWYgeW91IGNoYW5nZSB0aGlzIGZ1bmN0aW9uLCBydW4gYG5wbSBydW4gcmVnZW5lcmF0ZWAgdHdpY2U6IG9uY2UgdG9cbi8vID8gY29tcGlsZSB0aGlzIG5ldyBmdW5jdGlvbiBhbmQgb25jZSBhZ2FpbiB0byBjb21waWxlIGl0c2VsZiB3aXRoIHRoZSBuZXdseVxuLy8gPyBjb21waWxlZCBsb2dpYy4gSWYgdGhlcmUgaXMgYW4gZXJyb3IgdGhhdCBwcmV2ZW50cyByZWdlbmVyYXRpb24sIHlvdSBjYW5cbi8vID8gcnVuIGBucG0gcnVuIGdlbmVyYXRlYCB0aGVuIGBucG0gcnVuIHJlZ2VuZXJhdGVgIGluc3RlYWQuXG5jb25zdCByZWdlbmVyYXRlID0gKCkgPT4ge1xuICAgIHNhbml0eUNoZWNrKCk7XG5cbiAgICBsb2coYFJlZ2VuZXJhdGluZyB0YXJnZXRzOiBcIiR7cGF0aHMucmVnZW5UYXJnZXRzLmpvaW4oJ1wiIFwiJyl9XCJgKTtcblxuICAgIHByb2Nlc3MuZW52LkJBQkVMX0VOViA9ICdnZW5lcmF0b3InO1xuXG4gICAgcmV0dXJuIGd1bHAuc3JjKHBhdGhzLnJlZ2VuVGFyZ2V0cylcbiAgICAgICAgICAgICAgIC5waXBlKHRhcChmaWxlID0+IGZpbGUuY29udGVudHMgPSBCdWZmZXIuZnJvbShDTElfQkFOTkVSICsgYmFiZWwoZmlsZS5jb250ZW50cy50b1N0cmluZygpLCB7XG4gICAgICAgICAgICAgICAgICAgc291cmNlRmlsZU5hbWU6IHJlbFBhdGgoX19kaXJuYW1lLCBmaWxlLnBhdGgpXG4gICAgICAgICAgICAgICB9KS5jb2RlKSkpXG4gICAgICAgICAgICAgICAucGlwZShndWxwLmRlc3QoJy4nKSk7XG59O1xuXG5yZWdlbmVyYXRlLmRlc2NyaXB0aW9uID0gJ0ludm9rZXMgYmFiZWwgb24gdGhlIGZpbGVzIGluIGNvbmZpZywgdHJhbnNwaWxpbmcgdGhlbSBpbnRvIHRoZWlyIHByb2plY3Qgcm9vdCB2ZXJzaW9ucyc7XG5cbi8vICogRUpFQ1RcblxuY29uc3QgZWplY3QgPSAoKSA9PiB0ZXJtLnByb21wdChbXG4gICAge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lOiAncGFja2FnZS5uYW1lJyxcbiAgICAgICAgbWVzc2FnZTogJ1twYWNrYWdlLmpzb25dIFNwZWNpZnkgbmFtZSBmb3IgdGhpcyBwcm9qZWN0IChtdXN0IGJlIHZhbGlkIGFzIGEgZGlyZWN0b3J5IG5hbWUpJ1xuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lOiAncGFja2FnZS5kZXNjJyxcbiAgICAgICAgbWVzc2FnZTogJ1twYWNrYWdlLmpzb25dIFZlcnkgYnJpZWZseSBkZXNjcmliZSB0aGlzIHByb2plY3QnLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lOiAncGFja2FnZS5yZXBvLnVybCcsXG4gICAgICAgIG1lc3NhZ2U6ICdbcGFja2FnZS5qc29uXSBTcGVjaWZ5IGEgZ2l0IHJlcG9zaXRvcnkgVVJMJ1xuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lOiAnZGVidWcuYWRkcmVzcycsXG4gICAgICAgIG1lc3NhZ2U6ICdbbGF1bmNoLmpzb25dIFNwZWNpZnkgeW91ciBkZXYvcmVtb3RlL3NlcnZlciBpcCBhZGRyZXNzICh0aGUgb25lIHJ1bm5pbmcgbm9kZSknLFxuICAgICAgICBkZWZhdWx0OiAnMTkyLjE2OC4xMTUuNSdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZTogJ2RlYnVnLnVybCcsXG4gICAgICAgIG1lc3NhZ2U6ICdbbGF1bmNoLmpzb25dIFNwZWNpZnkgdGhlIFVSTCBlbnRyeSBwb2ludCBmb3IgeW91ciBhcHBsaWNhdGlvbicsXG4gICAgICAgIGRlZmF1bHQ6ICdodHRwOi8vZGV2LmxvY2FsOjgwJ1xuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lOiAnZGVidWcucmVtb3RlUm9vdCcsXG4gICAgICAgIG1lc3NhZ2U6IFwiW2xhdW5jaC5qc29uXSBTcGVjaWZ5IGFuICphYnNvbHV0ZSogcGF0aCB0byB0aGlzIHByb2plY3QncyByb290IG9uIHJlbW90ZS9zZXJ2ZXJcIlxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAnY29uZmlybScsXG4gICAgICAgIG5hbWU6ICdpbnN0YWxsVHlwZXMnLFxuICAgICAgICBtZXNzYWdlOiAnRG8geW91IHdhbnQgdG8gaW5zdGFsbCBGbG93IHR5cGVzIGZvciBhbGwgbG9jYWwgcGFja2FnZXM/JyxcbiAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAnY29uZmlybScsXG4gICAgICAgIG5hbWU6ICdjb25maXJtJyxcbiAgICAgICAgbWVzc2FnZTogJ0RvZXMgZXZlcnl0aGluZyBsb29rIGdvb2Q/JyxcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9XG5dKS50aGVuKGFzeW5jIGFuc3dlcnMgPT4ge1xuICAgIGlmKCFhbnN3ZXJzLmNvbmZpcm0pXG4gICAgICAgIHJldHVybiBsb2cuZXJyb3IoJ1Rhc2sgYWJvcnRlZCEnKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGxvZy5pbmZvKGBNb3ZpbmcgJHtwYXRocy5lbnZEaXN0fSAtPiAke3BhdGhzLmVudn1gKTtcbiAgICAgICAgc2gubXYocGF0aHMuZW52RGlzdCwgcGF0aHMuZW52KTtcblxuICAgICAgICBsb2cuaW5mbyhgTW92aW5nICR7cGF0aHMubGF1bmNoSnNvbkRpc3R9IC0+ICR7cGF0aHMubGF1bmNoSnNvbn1gKTtcbiAgICAgICAgc2gubXYocGF0aHMubGF1bmNoSnNvbkRpc3QsIHBhdGhzLmxhdW5jaEpzb24pO1xuXG4gICAgICAgIGxvZy5pbmZvKGBNdXRhdGluZyAke3BhdGhzLnBhY2thZ2VKc29ufWApO1xuICAgICAgICBjb25zdCBkZWx0YTEgPSBhd2FpdCByZXBsYWNlSW5GaWxlKHtcbiAgICAgICAgICAgIGZpbGVzOiBwYXRocy5wYWNrYWdlSnNvbixcbiAgICAgICAgICAgIGZyb206IFsvKFwibmFtZVwiOiA/KVwiLio/XCIvZywgLyhcImRlc2NyaXB0aW9uXCI6ID8pXCIuKj9cIi9nLCAvKFwidXJsXCI6ID8pXCIuKj9cIi9nXSxcbiAgICAgICAgICAgIHRvOiBbYCQxXCIke2Fuc3dlcnMucGFja2FnZS5uYW1lfVwiYCwgYCQxXCIke2Fuc3dlcnMucGFja2FnZS5kZXNjfVwiYCwgYCQxXCIke2Fuc3dlcnMucGFja2FnZS5yZXBvLnVybH1cImBdLFxuICAgICAgICB9KTtcblxuICAgICAgICBsb2cuaW5mbyhgTXV0YXRpbmcgJHtwYXRocy5sYXVuY2hKc29ufWApO1xuICAgICAgICBjb25zdCBkZWx0YTIgPSBhd2FpdCByZXBsYWNlSW5GaWxlKHtcbiAgICAgICAgICAgIGZpbGVzOiBwYXRocy5sYXVuY2hKc29uLFxuICAgICAgICAgICAgZnJvbTogWy8oXCJhZGRyZXNzXCI6ID8pXCIuKj9cIi9nLCAvKFwicmVtb3RlUm9vdFwiOiA/KVwiLio/XCIvZywgLyhcInVybFwiOiA/KVwiLio/XCIvZ10sXG4gICAgICAgICAgICB0bzogW2AkMVwiJHthbnN3ZXJzLmRlYnVnLmFkZHJlc3N9XCJgLCBgJDFcIiR7YW5zd2Vycy5kZWJ1Zy5yZW1vdGVSb290fVwiYCwgYCQxXCIke2Fuc3dlcnMuZGVidWcudXJsfVwiYF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvZy5pbmZvKGBNdXRhdGluZyAke3BhdGhzLmdpdElnbm9yZX1gKTtcbiAgICAgICAgY29uc3QgZGVsdGEzID0gYXdhaXQgcmVwbGFjZUluRmlsZSh7XG4gICAgICAgICAgICBmaWxlczogcGF0aHMuZ2l0SWdub3JlLFxuICAgICAgICAgICAgZnJvbTogJ3BhY2thZ2UtbG9jay5qc29uJyxcbiAgICAgICAgICAgIHRvOiAnJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoIWRlbHRhMS5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIHdhcyBhbiBlcnJvciBhdHRlbXB0aW5nIHRvIGFjY2VzcyBcIiR7cGF0aHMucGFja2FnZUpzb259XCJgKTtcblxuICAgICAgICBpZighZGVsdGEyLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlcmUgd2FzIGFuIGVycm9yIGF0dGVtcHRpbmcgdG8gYWNjZXNzIFwiJHtwYXRocy5sYXVuY2hKc29ufVwiYCk7XG5cbiAgICAgICAgaWYoIWRlbHRhMy5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIHdhcyBhbiBlcnJvciBhdHRlbXB0aW5nIHRvIGFjY2VzcyBcIiR7cGF0aHMuZ2l0aWdub3JlfVwiYCk7XG5cbiAgICAgICAgaWYoYW5zd2Vycy5pbnN0YWxsVHlwZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxvZy5pbmZvKGBJbnN0YWxsaW5nIGZsb3cgdHlwZXMgKHBsZWFzZSBiZSBwYXRpZW50KWApO1xuICAgICAgICAgICAgc2guZXhlYygnbnBtIHJ1biBpbnN0YWxsLXR5cGVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2cuaW5mbyhgUmVtb3ZpbmcgJHtwYXRocy5wYWNrYWdlTG9ja0pzb259YCk7XG4gICAgICAgIHNoLnJtKCctZicsIHBhdGhzLnBhY2thZ2VMb2NrSnNvbik7XG5cbiAgICAgICAgbG9nLmluZm8oJ1JlbW92aW5nIGJvaWxlcnBsYXRlIGdpdCByZXBvc2l0b3J5Jyk7XG4gICAgICAgIHNoLnJtKCctcmYnLCAnLmdpdCcpO1xuXG4gICAgICAgIGxvZy5pbmZvKCdJbml0aWFsaXppbmcgbmV3IGdpdCByZXBvc2l0b3J5Jyk7XG4gICAgICAgIHNoLmV4ZWMoJ2dpdCBpbml0Jyk7XG5cbiAgICAgICAgbG9nLmluZm8oYFJlbmFtaW5nIHByb2plY3QgZGlyIHRvICR7YW5zd2Vycy5wYWNrYWdlLm5hbWV9YCk7XG4gICAgICAgIHNoLmV4ZWMoYGNkIC4uICYmIG12ICcke3BhcnNlUGF0aChfX2Rpcm5hbWUpLm5hbWV9JyAnJHthbnN3ZXJzLnBhY2thZ2UubmFtZX0nYCk7XG5cbiAgICAgICAgbG9nLmluZm8oY2hhbGsuZ3JlZW4oJ0JvaWxlcnBsYXRlIGVqZWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhJykpO1xuICAgICAgICBsb2coYE5leHQgc3RlcHM6XG5cXHQtIElmIHlvdSdyZSBnb2luZyB0byBob3N0IHRoaXMgcHJvamVjdCBvbiBHaXRodWIvR2l0bGFiLCBiZWdpbiB0aGF0IHByb2Nlc3Mgbm93XG5cXHQtIENoZWNrIG92ZXIgJHtwYXRocy5wYWNrYWdlSnNvbn0gZm9yIGFjY3VyYWN5OyByZW1vdmUgYW55IHVubmVjZXNzYXJ5IGRlcGVuZGVuY2llcy9kZXZEZXBlbmRlbmNpZXMgYW5kIHJ1biBzY3JpcHRzXG5cXHQtIENoZWNrIG92ZXIgJHtwYXRocy5sYXVuY2hKc29ufSBpZiB5b3UgcGxhbiBvbiB1c2luZyBsYXVuY2ggY29uZmlndXJhdGlvbnNcblxcdC0gTG9vayBvdmVyICR7cGF0aHMuZW52fSBhbmQgY29uZmlndXJlIGl0IHRvIHlvdXIgbGlraW5nXG5cXHQtIENvbnNpZGVyIHJlbW92aW5nICR7cGF0aHMuZW52fSBmcm9tICR7cGF0aHMuZ2l0SWdub3JlfSBpZiB0aGVyZSdyZSBubyBzZWNyZXQgdmFsdWVzIGJlaW5nIHBhc3NlZFxuXFx0LSBZb3VyIEd1bHAgZmlsZSBpcyBhdCAuLyR7cGF0aHMuY29uZmlnc30vZ3VscGZpbGUuanMgJHtjaGFsay5ib2xkKCdhbmQgbm90IHRoZSBwcm9qZWN0IHJvb3QnKX0uIEZlZWwgZnJlZSB0byBjdXN0b21pemUgaXQhXFxuYCk7XG4gICAgfVxuXG4gICAgY2F0Y2goZXJyKSB7XG4gICAgICAgIGxvZy5lcnJvcihjaGFsay5yZWQoYEVSUk9SOiAke2Vyci50b1N0cmluZygpfWApKTtcbiAgICB9XG59KTtcblxuZWplY3QuZGVzY3JpcHRpb24gPSAnQXNzaXN0cyBpbiBjb25maWd1cmluZyB0aGUgYm9pbGVycGxhdGUgdG8gYmUgc29tZXRoaW5nIHVzZWZ1bCc7XG5cbmV4cG9ydCB7IGVqZWN0LCByZWdlbmVyYXRlLCBjbGVhblR5cGVzIH07XG4iXX0=