/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.cleanTypes = exports.regenerate = exports.eject = void 0;

require("source-map-support/register");

var _fs = require("fs");

var _util = require("util");

var _gulp = _interopRequireDefault(require("gulp"));

var _gulpTap = _interopRequireDefault(require("gulp-tap"));

var _del = _interopRequireDefault(require("del"));

var _fancyLog = _interopRequireDefault(require("fancy-log"));

var _parseGitignore = _interopRequireDefault(require("parse-gitignore"));

var _core = require("@babel/core");

var _path = require("path");

var _inquirer = _interopRequireDefault(require("inquirer"));

var _replaceInFile = _interopRequireDefault(require("replace-in-file"));

var _shelljs = _interopRequireDefault(require("shelljs"));

var _chalk = _interopRequireDefault(require("chalk"));

var _devUtils = require("./src/dev-utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_shelljs.default.config.silent = true;
_shelljs.default.config.fatal = true;
const paths = {};
paths.flowTyped = 'flow-typed';
paths.flowTypedGitIgnore = `${paths.flowTyped}/.gitignore`;
paths.build = `build`;
paths.buildGitIgnore = `${paths.build}/.gitignore`;
paths.configs = 'config';
paths.packageJson = 'package.json';
paths.launchJson = '.vscode/launch.json';
paths.launchJsonDist = '.vscode/launch.dist.json';
paths.env = '.env';
paths.envDist = 'dist.env';
paths.gitProjectDir = '.git';
paths.gitIgnore = '.gitignore';
paths.packageLockJson = 'package-lock.json';
paths.regenTargets = [`${paths.configs}/*.js`];
const CLI_BANNER = `/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/\n\n`;
const readFileAsync = (0, _util.promisify)(_fs.readFile);

const cleanTypes = async () => {
  (0, _devUtils.populateEnv)();
  const targets = (0, _parseGitignore.default)((await readFileAsync(paths.flowTypedGitIgnore)));
  (0, _fancyLog.default)(`Deletion targets @ ${paths.flowTyped}/: "${targets.join('" "')}"`);
  (0, _del.default)(targets, {
    cwd: paths.flowTyped
  });
};

exports.cleanTypes = cleanTypes;
cleanTypes.description = `Resets the ${paths.flowTyped} directory to a pristine state`;

const regenerate = () => {
  (0, _devUtils.populateEnv)();
  (0, _fancyLog.default)(`Regenerating targets: "${paths.regenTargets.join('" "')}"`);
  process.env.BABEL_ENV = 'generator';
  return _gulp.default.src(paths.regenTargets).pipe((0, _gulpTap.default)(file => file.contents = Buffer.from(CLI_BANNER + (0, _core.transformSync)(file.contents.toString(), {
    sourceFileName: (0, _path.relative)(__dirname, file.path)
  }).code))).pipe(_gulp.default.dest('.'));
};

exports.regenerate = regenerate;
regenerate.description = 'Invokes babel on the files in config, transpiling them into their project root versions';

const eject = () => _inquirer.default.prompt([{
  type: 'input',
  name: 'package.name',
  message: '[package.json] Specify name for this project (must be valid as a directory name)'
}, {
  type: 'input',
  name: 'package.desc',
  message: '[package.json] Very briefly describe this project'
}, {
  type: 'input',
  name: 'package.repo.url',
  message: '[package.json] Specify a git repository URL'
}, {
  type: 'input',
  name: 'debug.address',
  message: '[launch.json] Specify your dev/remote/server ip address (the one running node)',
  default: '192.168.115.5'
}, {
  type: 'input',
  name: 'debug.url',
  message: '[launch.json] Specify the URL entry point for your application',
  default: 'http://dev.local:80'
}, {
  type: 'input',
  name: 'debug.remoteRoot',
  message: "[launch.json] Specify an *absolute* path to this project's root on remote/server"
}, {
  type: 'confirm',
  name: 'installTypes',
  message: 'Do you want to install Flow types for all local packages?',
  default: true
}, {
  type: 'confirm',
  name: 'confirm',
  message: 'Does everything look good?',
  default: false
}]).then(async answers => {
  if (!answers.confirm) return _fancyLog.default.error('Task aborted!');

  try {
    _fancyLog.default.info(`Moving ${paths.envDist} -> ${paths.env}`);

    _shelljs.default.mv(paths.envDist, paths.env);

    _fancyLog.default.info(`Moving ${paths.launchJsonDist} -> ${paths.launchJson}`);

    _shelljs.default.mv(paths.launchJsonDist, paths.launchJson);

    _fancyLog.default.info(`Mutating ${paths.packageJson}`);

    const delta1 = await (0, _replaceInFile.default)({
      files: paths.packageJson,
      from: [/("name": ?)".*?"/g, /("description": ?)".*?"/g, /("url": ?)".*?"/g],
      to: [`$1"${answers.package.name}"`, `$1"${answers.package.desc}"`, `$1"${answers.package.repo.url}"`]
    });

    _fancyLog.default.info(`Mutating ${paths.launchJson}`);

    const delta2 = await (0, _replaceInFile.default)({
      files: paths.launchJson,
      from: [/("address": ?)".*?"/g, /("remoteRoot": ?)".*?"/g, /("url": ?)".*?"/g],
      to: [`$1"${answers.debug.address}"`, `$1"${answers.debug.remoteRoot}"`, `$1"${answers.debug.url}"`]
    });

    _fancyLog.default.info(`Mutating ${paths.gitIgnore}`);

    const delta3 = await (0, _replaceInFile.default)({
      files: paths.gitIgnore,
      from: 'package-lock.json',
      to: ''
    });
    if (!delta1.length) throw new Error(`There was an error attempting to access "${paths.packageJson}"`);
    if (!delta2.length) throw new Error(`There was an error attempting to access "${paths.launchJson}"`);
    if (!delta3.length) throw new Error(`There was an error attempting to access "${paths.gitignore}"`);

    if (answers.installTypes) {
      _fancyLog.default.info(`Installing flow types (please be patient)`);

      _shelljs.default.exec('npm run install-types');
    }

    _fancyLog.default.info(`Removing ${paths.packageLockJson}`);

    _shelljs.default.rm('-f', paths.packageLockJson);

    _fancyLog.default.info('Removing boilerplate git repository');

    _shelljs.default.rm('-rf', '.git');

    _fancyLog.default.info('Initializing new git repository');

    _shelljs.default.exec('git init');

    _fancyLog.default.info(`Renaming project dir to ${answers.package.name}`);

    _shelljs.default.exec(`cd .. && mv '${(0, _path.parse)(__dirname).base}' '${answers.package.name}'`);

    _fancyLog.default.info(_chalk.default.green('Boilerplate ejection completed successfully!'));

    (0, _fancyLog.default)(`Next steps:
\t- If you're going to host this project on Github/Gitlab, complete that process now
\t- To be safe, remove the "init" command from the available run scripts in ${paths.packageJson}
\t- Check over ${paths.packageJson} for accuracy; remove any other unnecessary dependencies/devDependencies and run scripts
\t- Check over ${paths.launchJson} if you plan on using launch configurations
\t- Look over ${paths.env} and configure it to your liking
\t- Consider removing ${paths.env} from ${paths.gitIgnore} if you don't mind everyone seeing your .env values
\t- Your Gulp file is at ./${paths.configs}/gulpfile.js ${_chalk.default.bold('and not the project root')}. Customize it!\n`);
  } catch (err) {
    _fancyLog.default.error(_chalk.default.red(`ERROR: ${err.toString()}`));
  }
});

exports.eject = eject;
eject.description = 'Assists in configuring the boilerplate to be something useful';
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9ndWxwZmlsZS5qcyJdLCJuYW1lcyI6WyJzaCIsImNvbmZpZyIsInNpbGVudCIsImZhdGFsIiwicGF0aHMiLCJmbG93VHlwZWQiLCJmbG93VHlwZWRHaXRJZ25vcmUiLCJidWlsZCIsImJ1aWxkR2l0SWdub3JlIiwiY29uZmlncyIsInBhY2thZ2VKc29uIiwibGF1bmNoSnNvbiIsImxhdW5jaEpzb25EaXN0IiwiZW52IiwiZW52RGlzdCIsImdpdFByb2plY3REaXIiLCJnaXRJZ25vcmUiLCJwYWNrYWdlTG9ja0pzb24iLCJyZWdlblRhcmdldHMiLCJDTElfQkFOTkVSIiwicmVhZEZpbGVBc3luYyIsInJlYWRGaWxlIiwiY2xlYW5UeXBlcyIsInRhcmdldHMiLCJqb2luIiwiY3dkIiwiZGVzY3JpcHRpb24iLCJyZWdlbmVyYXRlIiwicHJvY2VzcyIsIkJBQkVMX0VOViIsImd1bHAiLCJzcmMiLCJwaXBlIiwiZmlsZSIsImNvbnRlbnRzIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwic291cmNlRmlsZU5hbWUiLCJfX2Rpcm5hbWUiLCJwYXRoIiwiY29kZSIsImRlc3QiLCJlamVjdCIsInRlcm0iLCJwcm9tcHQiLCJ0eXBlIiwibmFtZSIsIm1lc3NhZ2UiLCJkZWZhdWx0IiwidGhlbiIsImFuc3dlcnMiLCJjb25maXJtIiwibG9nIiwiZXJyb3IiLCJpbmZvIiwibXYiLCJkZWx0YTEiLCJmaWxlcyIsInRvIiwicGFja2FnZSIsImRlc2MiLCJyZXBvIiwidXJsIiwiZGVsdGEyIiwiZGVidWciLCJhZGRyZXNzIiwicmVtb3RlUm9vdCIsImRlbHRhMyIsImxlbmd0aCIsIkVycm9yIiwiZ2l0aWdub3JlIiwiaW5zdGFsbFR5cGVzIiwiZXhlYyIsInJtIiwiYmFzZSIsImNoYWxrIiwiZ3JlZW4iLCJib2xkIiwiZXJyIiwicmVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFTQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFD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QVMsaUNBQVQ7O0FBQ0F2RCxxQkFBR3lFLElBQUgsQ0FBUSxVQUFSOztBQUVBcEIsc0JBQUlFLElBQUosQ0FBVSwyQkFBMEJKLE9BQU8sQ0FBQ1MsT0FBUixDQUFnQmIsSUFBSyxFQUF6RDs7QUFDQS9DLHFCQUFHeUUsSUFBSCxDQUFTLGdCQUFlLGlCQUFVbEMsU0FBVixFQUFxQm9DLElBQUssTUFBS3hCLE9BQU8sQ0FBQ1MsT0FBUixDQUFnQmIsSUFBSyxHQUE1RTs7QUFFQU0sc0JBQUlFLElBQUosQ0FBU3FCLGVBQU1DLEtBQU4sQ0FBWSw4Q0FBWixDQUFUOztBQUNBLDJCQUFLOzs4RUFFaUV6RSxLQUFLLENBQUNNLFdBQVk7aUJBQy9FTixLQUFLLENBQUNNLFdBQVk7aUJBQ2xCTixLQUFLLENBQUNPLFVBQVc7Z0JBQ2xCUCxLQUFLLENBQUNTLEdBQUk7d0JBQ0ZULEtBQUssQ0FBQ1MsR0FBSSxTQUFRVCxLQUFLLENBQUNZLFNBQVU7NkJBQzdCWixLQUFLLENBQUNLLE9BQVEsZ0JBQWVtRSxlQUFNRSxJQUFOLENBQVcsMEJBQVgsQ0FBdUMsbUJBUHpGO0FBUUgsR0FoRUQsQ0FrRUEsT0FBTUMsR0FBTixFQUFXO0FBQ1AxQixzQkFBSUMsS0FBSixDQUFVc0IsZUFBTUksR0FBTixDQUFXLFVBQVNELEdBQUcsQ0FBQzFDLFFBQUosRUFBZSxFQUFuQyxDQUFWO0FBQ0g7QUFDSixDQXRIbUIsQ0FBcEI7OztBQXdIQU0sS0FBSyxDQUFDakIsV0FBTixHQUFvQiwrREFBcEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG4vLyA/IFRvIHJlZ2VuZXJhdGUgdGhpcyBmaWxlIChpLmUuIGlmIHlvdSBjaGFuZ2VkIGl0IGFuZCB3YW50IHlvdXIgY2hhbmdlcyB0b1xuLy8gPyBiZSBwZXJtYW5lbnQpLCBjYWxsIGBucG0gcnVuIHJlZ2VuZXJhdGVgIGFmdGVyd2FyZHNcblxuLy8gISBCZSBzdXJlIHRoYXQgdGFza3MgZXhwZWN0ZWQgdG8gcnVuIG9uIG5wbSBpbnN0YWxsIChtYXJrZWQgQGRlcGVuZGVudCkgaGF2ZVxuLy8gISBhbGwgcmVxdWlyZWQgcGFja2FnZXMgbGlzdGVkIHVuZGVyIFwiZGVwZW5kZW5jaWVzXCIgaW5zdGVhZCBvZlxuLy8gISBcImRldkRlcGVuZGVuY2llc1wiIGluIHRoaXMgcHJvamVjdCdzIHBhY2thZ2UuanNvblxuXG5pbXBvcnQgeyByZWFkRmlsZSB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAndXRpbCdcbmltcG9ydCBndWxwIGZyb20gJ2d1bHAnXG5pbXBvcnQgdGFwIGZyb20gJ2d1bHAtdGFwJ1xuaW1wb3J0IGRlbCBmcm9tICdkZWwnXG5pbXBvcnQgbG9nIGZyb20gJ2ZhbmN5LWxvZydcbmltcG9ydCBwYXJzZUdpdElnbm9yZSBmcm9tICdwYXJzZS1naXRpZ25vcmUnXG5pbXBvcnQgeyB0cmFuc2Zvcm1TeW5jIGFzIGJhYmVsIH0gZnJvbSAnQGJhYmVsL2NvcmUnXG5pbXBvcnQgeyBwYXJzZSBhcyBwYXJzZVBhdGgsIHJlbGF0aXZlIGFzIHJlbFBhdGggfSBmcm9tICdwYXRoJ1xuaW1wb3J0IHRlcm0gZnJvbSAnaW5xdWlyZXInXG5pbXBvcnQgcmVwbGFjZUluRmlsZSBmcm9tICdyZXBsYWNlLWluLWZpbGUnXG5pbXBvcnQgc2ggZnJvbSAnc2hlbGxqcydcbmltcG9ydCBjaGFsayBmcm9tICdjaGFsaydcblxuLy8gZmxvdy1kaXNhYmxlLWxpbmVcbmltcG9ydCB7IHBvcHVsYXRlRW52IH0gZnJvbSAnLi9zcmMvZGV2LXV0aWxzJ1xuXG5zaC5jb25maWcuc2lsZW50ID0gdHJ1ZTtcbnNoLmNvbmZpZy5mYXRhbCA9IHRydWU7XG5cbmNvbnN0IHBhdGhzID0ge307XG5cbnBhdGhzLmZsb3dUeXBlZCA9ICdmbG93LXR5cGVkJztcbnBhdGhzLmZsb3dUeXBlZEdpdElnbm9yZSA9IGAke3BhdGhzLmZsb3dUeXBlZH0vLmdpdGlnbm9yZWA7XG5wYXRocy5idWlsZCA9IGBidWlsZGA7XG5wYXRocy5idWlsZEdpdElnbm9yZSA9IGAke3BhdGhzLmJ1aWxkfS8uZ2l0aWdub3JlYDtcbnBhdGhzLmNvbmZpZ3MgPSAnY29uZmlnJztcbnBhdGhzLnBhY2thZ2VKc29uID0gJ3BhY2thZ2UuanNvbic7XG5wYXRocy5sYXVuY2hKc29uID0gJy52c2NvZGUvbGF1bmNoLmpzb24nO1xucGF0aHMubGF1bmNoSnNvbkRpc3QgPSAnLnZzY29kZS9sYXVuY2guZGlzdC5qc29uJztcbnBhdGhzLmVudiA9ICcuZW52JztcbnBhdGhzLmVudkRpc3QgPSAnZGlzdC5lbnYnO1xucGF0aHMuZ2l0UHJvamVjdERpciA9ICcuZ2l0JztcbnBhdGhzLmdpdElnbm9yZSA9ICcuZ2l0aWdub3JlJztcbnBhdGhzLnBhY2thZ2VMb2NrSnNvbiA9ICdwYWNrYWdlLWxvY2suanNvbic7XG5cbnBhdGhzLnJlZ2VuVGFyZ2V0cyA9IFtcbiAgICBgJHtwYXRocy5jb25maWdzfS8qLmpzYFxuXTtcblxuY29uc3QgQ0xJX0JBTk5FUiA9IGAvKipcbiogISEhIERPIE5PVCBFRElUIFRISVMgRklMRSBESVJFQ1RMWSAhISFcbiogISBUaGlzIGZpbGUgaGFzIGJlZW4gZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkuIFNlZSB0aGUgY29uZmlnLyouanMgdmVyc2lvbiBvZlxuKiAhIHRoaXMgZmlsZSB0byBtYWtlIHBlcm1hbmVudCBtb2RpZmljYXRpb25zIVxuKi9cXG5cXG5gO1xuXG5jb25zdCByZWFkRmlsZUFzeW5jID0gcHJvbWlzaWZ5KHJlYWRGaWxlKTtcblxuLy8gKiBDTEVBTlRZUEVTXG5cbmNvbnN0IGNsZWFuVHlwZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgcG9wdWxhdGVFbnYoKTtcblxuICAgIGNvbnN0IHRhcmdldHMgPSBwYXJzZUdpdElnbm9yZShhd2FpdCByZWFkRmlsZUFzeW5jKHBhdGhzLmZsb3dUeXBlZEdpdElnbm9yZSkpO1xuXG4gICAgbG9nKGBEZWxldGlvbiB0YXJnZXRzIEAgJHtwYXRocy5mbG93VHlwZWR9LzogXCIke3RhcmdldHMuam9pbignXCIgXCInKX1cImApO1xuICAgIGRlbCh0YXJnZXRzLCB7IGN3ZDogcGF0aHMuZmxvd1R5cGVkIH0pO1xufTtcblxuY2xlYW5UeXBlcy5kZXNjcmlwdGlvbiA9IGBSZXNldHMgdGhlICR7cGF0aHMuZmxvd1R5cGVkfSBkaXJlY3RvcnkgdG8gYSBwcmlzdGluZSBzdGF0ZWA7XG5cbi8vICogUkVHRU5FUkFURVxuXG4vLyA/IElmIHlvdSBjaGFuZ2UgdGhpcyBmdW5jdGlvbiwgcnVuIGBucG0gcnVuIHJlZ2VuZXJhdGVgIHR3aWNlOiBvbmNlIHRvXG4vLyA/IGNvbXBpbGUgdGhpcyBuZXcgZnVuY3Rpb24gYW5kIG9uY2UgYWdhaW4gdG8gY29tcGlsZSBpdHNlbGYgd2l0aCB0aGUgbmV3bHlcbi8vID8gY29tcGlsZWQgbG9naWMuIElmIHRoZXJlIGlzIGFuIGVycm9yIHRoYXQgcHJldmVudHMgcmVnZW5lcmF0aW9uLCB5b3UgY2FuXG4vLyA/IHJ1biBgbnBtIHJ1biBnZW5lcmF0ZWAgdGhlbiBgbnBtIHJ1biByZWdlbmVyYXRlYCBpbnN0ZWFkLlxuY29uc3QgcmVnZW5lcmF0ZSA9ICgpID0+IHtcbiAgICBwb3B1bGF0ZUVudigpO1xuXG4gICAgbG9nKGBSZWdlbmVyYXRpbmcgdGFyZ2V0czogXCIke3BhdGhzLnJlZ2VuVGFyZ2V0cy5qb2luKCdcIiBcIicpfVwiYCk7XG5cbiAgICBwcm9jZXNzLmVudi5CQUJFTF9FTlYgPSAnZ2VuZXJhdG9yJztcblxuICAgIHJldHVybiBndWxwLnNyYyhwYXRocy5yZWdlblRhcmdldHMpXG4gICAgICAgICAgICAgICAucGlwZSh0YXAoZmlsZSA9PiBmaWxlLmNvbnRlbnRzID0gQnVmZmVyLmZyb20oQ0xJX0JBTk5FUiArIGJhYmVsKGZpbGUuY29udGVudHMudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgICAgICAgIHNvdXJjZUZpbGVOYW1lOiByZWxQYXRoKF9fZGlybmFtZSwgZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgfSkuY29kZSkpKVxuICAgICAgICAgICAgICAgLnBpcGUoZ3VscC5kZXN0KCcuJykpO1xufTtcblxucmVnZW5lcmF0ZS5kZXNjcmlwdGlvbiA9ICdJbnZva2VzIGJhYmVsIG9uIHRoZSBmaWxlcyBpbiBjb25maWcsIHRyYW5zcGlsaW5nIHRoZW0gaW50byB0aGVpciBwcm9qZWN0IHJvb3QgdmVyc2lvbnMnO1xuXG4vLyAqIEVKRUNUXG5cbmNvbnN0IGVqZWN0ID0gKCkgPT4gdGVybS5wcm9tcHQoW1xuICAgIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZTogJ3BhY2thZ2UubmFtZScsXG4gICAgICAgIG1lc3NhZ2U6ICdbcGFja2FnZS5qc29uXSBTcGVjaWZ5IG5hbWUgZm9yIHRoaXMgcHJvamVjdCAobXVzdCBiZSB2YWxpZCBhcyBhIGRpcmVjdG9yeSBuYW1lKSdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZTogJ3BhY2thZ2UuZGVzYycsXG4gICAgICAgIG1lc3NhZ2U6ICdbcGFja2FnZS5qc29uXSBWZXJ5IGJyaWVmbHkgZGVzY3JpYmUgdGhpcyBwcm9qZWN0JyxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZTogJ3BhY2thZ2UucmVwby51cmwnLFxuICAgICAgICBtZXNzYWdlOiAnW3BhY2thZ2UuanNvbl0gU3BlY2lmeSBhIGdpdCByZXBvc2l0b3J5IFVSTCdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZTogJ2RlYnVnLmFkZHJlc3MnLFxuICAgICAgICBtZXNzYWdlOiAnW2xhdW5jaC5qc29uXSBTcGVjaWZ5IHlvdXIgZGV2L3JlbW90ZS9zZXJ2ZXIgaXAgYWRkcmVzcyAodGhlIG9uZSBydW5uaW5nIG5vZGUpJyxcbiAgICAgICAgZGVmYXVsdDogJzE5Mi4xNjguMTE1LjUnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWU6ICdkZWJ1Zy51cmwnLFxuICAgICAgICBtZXNzYWdlOiAnW2xhdW5jaC5qc29uXSBTcGVjaWZ5IHRoZSBVUkwgZW50cnkgcG9pbnQgZm9yIHlvdXIgYXBwbGljYXRpb24nLFxuICAgICAgICBkZWZhdWx0OiAnaHR0cDovL2Rldi5sb2NhbDo4MCdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZTogJ2RlYnVnLnJlbW90ZVJvb3QnLFxuICAgICAgICBtZXNzYWdlOiBcIltsYXVuY2guanNvbl0gU3BlY2lmeSBhbiAqYWJzb2x1dGUqIHBhdGggdG8gdGhpcyBwcm9qZWN0J3Mgcm9vdCBvbiByZW1vdGUvc2VydmVyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2NvbmZpcm0nLFxuICAgICAgICBuYW1lOiAnaW5zdGFsbFR5cGVzJyxcbiAgICAgICAgbWVzc2FnZTogJ0RvIHlvdSB3YW50IHRvIGluc3RhbGwgRmxvdyB0eXBlcyBmb3IgYWxsIGxvY2FsIHBhY2thZ2VzPycsXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ2NvbmZpcm0nLFxuICAgICAgICBuYW1lOiAnY29uZmlybScsXG4gICAgICAgIG1lc3NhZ2U6ICdEb2VzIGV2ZXJ5dGhpbmcgbG9vayBnb29kPycsXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfVxuXSkudGhlbihhc3luYyBhbnN3ZXJzID0+IHtcbiAgICBpZighYW5zd2Vycy5jb25maXJtKVxuICAgICAgICByZXR1cm4gbG9nLmVycm9yKCdUYXNrIGFib3J0ZWQhJyk7XG5cbiAgICB0cnkge1xuICAgICAgICBsb2cuaW5mbyhgTW92aW5nICR7cGF0aHMuZW52RGlzdH0gLT4gJHtwYXRocy5lbnZ9YCk7XG4gICAgICAgIHNoLm12KHBhdGhzLmVudkRpc3QsIHBhdGhzLmVudik7XG5cbiAgICAgICAgbG9nLmluZm8oYE1vdmluZyAke3BhdGhzLmxhdW5jaEpzb25EaXN0fSAtPiAke3BhdGhzLmxhdW5jaEpzb259YCk7XG4gICAgICAgIHNoLm12KHBhdGhzLmxhdW5jaEpzb25EaXN0LCBwYXRocy5sYXVuY2hKc29uKTtcblxuICAgICAgICBsb2cuaW5mbyhgTXV0YXRpbmcgJHtwYXRocy5wYWNrYWdlSnNvbn1gKTtcbiAgICAgICAgY29uc3QgZGVsdGExID0gYXdhaXQgcmVwbGFjZUluRmlsZSh7XG4gICAgICAgICAgICBmaWxlczogcGF0aHMucGFja2FnZUpzb24sXG4gICAgICAgICAgICBmcm9tOiBbLyhcIm5hbWVcIjogPylcIi4qP1wiL2csIC8oXCJkZXNjcmlwdGlvblwiOiA/KVwiLio/XCIvZywgLyhcInVybFwiOiA/KVwiLio/XCIvZ10sXG4gICAgICAgICAgICB0bzogW2AkMVwiJHthbnN3ZXJzLnBhY2thZ2UubmFtZX1cImAsIGAkMVwiJHthbnN3ZXJzLnBhY2thZ2UuZGVzY31cImAsIGAkMVwiJHthbnN3ZXJzLnBhY2thZ2UucmVwby51cmx9XCJgXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9nLmluZm8oYE11dGF0aW5nICR7cGF0aHMubGF1bmNoSnNvbn1gKTtcbiAgICAgICAgY29uc3QgZGVsdGEyID0gYXdhaXQgcmVwbGFjZUluRmlsZSh7XG4gICAgICAgICAgICBmaWxlczogcGF0aHMubGF1bmNoSnNvbixcbiAgICAgICAgICAgIGZyb206IFsvKFwiYWRkcmVzc1wiOiA/KVwiLio/XCIvZywgLyhcInJlbW90ZVJvb3RcIjogPylcIi4qP1wiL2csIC8oXCJ1cmxcIjogPylcIi4qP1wiL2ddLFxuICAgICAgICAgICAgdG86IFtgJDFcIiR7YW5zd2Vycy5kZWJ1Zy5hZGRyZXNzfVwiYCwgYCQxXCIke2Fuc3dlcnMuZGVidWcucmVtb3RlUm9vdH1cImAsIGAkMVwiJHthbnN3ZXJzLmRlYnVnLnVybH1cImBdLFxuICAgICAgICB9KTtcblxuICAgICAgICBsb2cuaW5mbyhgTXV0YXRpbmcgJHtwYXRocy5naXRJZ25vcmV9YCk7XG4gICAgICAgIGNvbnN0IGRlbHRhMyA9IGF3YWl0IHJlcGxhY2VJbkZpbGUoe1xuICAgICAgICAgICAgZmlsZXM6IHBhdGhzLmdpdElnbm9yZSxcbiAgICAgICAgICAgIGZyb206ICdwYWNrYWdlLWxvY2suanNvbicsXG4gICAgICAgICAgICB0bzogJycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCFkZWx0YTEubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSB3YXMgYW4gZXJyb3IgYXR0ZW1wdGluZyB0byBhY2Nlc3MgXCIke3BhdGhzLnBhY2thZ2VKc29ufVwiYCk7XG5cbiAgICAgICAgaWYoIWRlbHRhMi5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIHdhcyBhbiBlcnJvciBhdHRlbXB0aW5nIHRvIGFjY2VzcyBcIiR7cGF0aHMubGF1bmNoSnNvbn1cImApO1xuXG4gICAgICAgIGlmKCFkZWx0YTMubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSB3YXMgYW4gZXJyb3IgYXR0ZW1wdGluZyB0byBhY2Nlc3MgXCIke3BhdGhzLmdpdGlnbm9yZX1cImApO1xuXG4gICAgICAgIGlmKGFuc3dlcnMuaW5zdGFsbFR5cGVzKVxuICAgICAgICB7XG4gICAgICAgICAgICBsb2cuaW5mbyhgSW5zdGFsbGluZyBmbG93IHR5cGVzIChwbGVhc2UgYmUgcGF0aWVudClgKTtcbiAgICAgICAgICAgIHNoLmV4ZWMoJ25wbSBydW4gaW5zdGFsbC10eXBlcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9nLmluZm8oYFJlbW92aW5nICR7cGF0aHMucGFja2FnZUxvY2tKc29ufWApO1xuICAgICAgICBzaC5ybSgnLWYnLCBwYXRocy5wYWNrYWdlTG9ja0pzb24pO1xuXG4gICAgICAgIGxvZy5pbmZvKCdSZW1vdmluZyBib2lsZXJwbGF0ZSBnaXQgcmVwb3NpdG9yeScpO1xuICAgICAgICBzaC5ybSgnLXJmJywgJy5naXQnKTtcblxuICAgICAgICBsb2cuaW5mbygnSW5pdGlhbGl6aW5nIG5ldyBnaXQgcmVwb3NpdG9yeScpO1xuICAgICAgICBzaC5leGVjKCdnaXQgaW5pdCcpO1xuXG4gICAgICAgIGxvZy5pbmZvKGBSZW5hbWluZyBwcm9qZWN0IGRpciB0byAke2Fuc3dlcnMucGFja2FnZS5uYW1lfWApO1xuICAgICAgICBzaC5leGVjKGBjZCAuLiAmJiBtdiAnJHtwYXJzZVBhdGgoX19kaXJuYW1lKS5iYXNlfScgJyR7YW5zd2Vycy5wYWNrYWdlLm5hbWV9J2ApO1xuXG4gICAgICAgIGxvZy5pbmZvKGNoYWxrLmdyZWVuKCdCb2lsZXJwbGF0ZSBlamVjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IScpKTtcbiAgICAgICAgbG9nKGBOZXh0IHN0ZXBzOlxuXFx0LSBJZiB5b3UncmUgZ29pbmcgdG8gaG9zdCB0aGlzIHByb2plY3Qgb24gR2l0aHViL0dpdGxhYiwgY29tcGxldGUgdGhhdCBwcm9jZXNzIG5vd1xuXFx0LSBUbyBiZSBzYWZlLCByZW1vdmUgdGhlIFwiaW5pdFwiIGNvbW1hbmQgZnJvbSB0aGUgYXZhaWxhYmxlIHJ1biBzY3JpcHRzIGluICR7cGF0aHMucGFja2FnZUpzb259XG5cXHQtIENoZWNrIG92ZXIgJHtwYXRocy5wYWNrYWdlSnNvbn0gZm9yIGFjY3VyYWN5OyByZW1vdmUgYW55IG90aGVyIHVubmVjZXNzYXJ5IGRlcGVuZGVuY2llcy9kZXZEZXBlbmRlbmNpZXMgYW5kIHJ1biBzY3JpcHRzXG5cXHQtIENoZWNrIG92ZXIgJHtwYXRocy5sYXVuY2hKc29ufSBpZiB5b3UgcGxhbiBvbiB1c2luZyBsYXVuY2ggY29uZmlndXJhdGlvbnNcblxcdC0gTG9vayBvdmVyICR7cGF0aHMuZW52fSBhbmQgY29uZmlndXJlIGl0IHRvIHlvdXIgbGlraW5nXG5cXHQtIENvbnNpZGVyIHJlbW92aW5nICR7cGF0aHMuZW52fSBmcm9tICR7cGF0aHMuZ2l0SWdub3JlfSBpZiB5b3UgZG9uJ3QgbWluZCBldmVyeW9uZSBzZWVpbmcgeW91ciAuZW52IHZhbHVlc1xuXFx0LSBZb3VyIEd1bHAgZmlsZSBpcyBhdCAuLyR7cGF0aHMuY29uZmlnc30vZ3VscGZpbGUuanMgJHtjaGFsay5ib2xkKCdhbmQgbm90IHRoZSBwcm9qZWN0IHJvb3QnKX0uIEN1c3RvbWl6ZSBpdCFcXG5gKTtcbiAgICB9XG5cbiAgICBjYXRjaChlcnIpIHtcbiAgICAgICAgbG9nLmVycm9yKGNoYWxrLnJlZChgRVJST1I6ICR7ZXJyLnRvU3RyaW5nKCl9YCkpO1xuICAgIH1cbn0pO1xuXG5lamVjdC5kZXNjcmlwdGlvbiA9ICdBc3Npc3RzIGluIGNvbmZpZ3VyaW5nIHRoZSBib2lsZXJwbGF0ZSB0byBiZSBzb21ldGhpbmcgdXNlZnVsJztcblxuZXhwb3J0IHsgZWplY3QsIHJlZ2VuZXJhdGUsIGNsZWFuVHlwZXMgfTtcbiJdfQ==